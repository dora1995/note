React-Router的基本使用略

### 如何实现跳转

路由器，路由，导航

路由器负责感知路由的变化并作出反应，它是整个路由系统中最为重要的一环

createBrowserHistory: 它将在浏览器中使用 HTML5 history API 来处理 URL（见下图标红处的说明），它能够处理形如这样的 URL，example.com/some/path。由此可得，BrowserRouter 是使用 HTML 5 的 history API 来控制路由跳转的

createHashHistory: 它是使用 hash tag (#) 处理 URL 的方法，能够处理形如这样的 URL，example.com/#/some/path。我们可以看到它的源码中对各种方法的定义基本都围绕 hash 展开（如下图所示），由此可得，HashRouter 是通过 URL 的 hash 属性来控制路由跳转的

### 为什么我们需要前端路由

背景：以前是一个url对应一个页面，跳转会伴随着刷新；SPA单页面应用的出现，可以在页面不刷新的情况下更新内容；因此也对应出了问题：1.SPA并不知道当前页面进展到哪一步，无法定位。2.仅有一个url给页面做映射，对seo不友好

方案：前端路由可以帮助我们在仅有一个页面的情况下，“记住”用户当前走到了哪一步——为 SPA 中的各个视图匹配一个唯一标识。这意味着用户前进、后退触发的新内容，都会映射到不同的 URL 上去。此时即便他刷新页面，因为当前的 URL 可以标识出他所处的位置，因此内容也不会丢失

- 当用户刷新页面时，浏览器会默认根据当前 URL 对资源进行重新定位（发送请求）。这个动作对 SPA 是不必要的，因为 SPA 作为单页面，无论如何也只会有一个资源与之对应。此时若走正常的请求-刷新流程，反而会使用户的前进后退操作无法被记录。
- 单页面应用对服务端来说，就是一个 URL、一套资源，那么如何做到用“不同的 URL”来映射不同的视图内容呢？

- 拦截用户的刷新操作，避免服务端盲目响应、返回不符合预期的资源内容，把刷新这个动作完全放到前端逻辑里消化掉
- 感知 URL 的变化。这里不是说要改造 URL、凭空制造出 N 个 URL 来。而是说 URL 还是那个 URL，只不过我们可以给它做一些微小的处理，这些处理并不会影响 URL 本身的性质，不会影响服务器对它的识别，只有我们前端能感知到。一旦我们感知到了，我们就根据这些变化、用 JS 去给它生成不同的内容。

实践
- hash 模式：通过改变url后面以#分隔的字符串，从而让页面感知到路由变化；可以通过`window.location.hash='index'`去改，可以通过`hashchange`来捕捉hash的变化，进而决定页面是否更新
- history 模式：浏览器的history api，以及h5新增的pushState和repalceState；通过`window.addEventListener('popstate')`来监听历史变化（pushState 和 replaceState 不会）
